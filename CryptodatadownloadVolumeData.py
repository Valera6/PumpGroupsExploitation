from io import StringIO
import requests

def av_volume(symbol):
    symbol = symbol+'USDT'
    r = requests.get(f"https://www.cryptodatadownload.com/cdd/Kucoin_{symbol}_d.csv")

    d30 = []
    for i, line in enumerate(r.iter_lines()):
        if i>1:
            line = line.decode('utf-8')
            split = line.split(',')
            d30.append(float(split[-1]))
        if i>31:
            break
    return sum(d30)/30
    

print(av_volume('XNL'))
